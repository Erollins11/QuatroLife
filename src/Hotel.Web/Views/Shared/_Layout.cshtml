@using System.Text.Json
@using Hotel.Web.ViewModels
@inject IConfiguration Configuration
@inject IStringLocalizer<SharedResource> Localizer

@{
    var pageProperty = ViewData.Model?.GetType().GetProperty("Page");
    var pageContext = pageProperty?.GetValue(ViewData.Model) as PageContextViewModel;

    var siteName = Configuration["Seo:SiteName"] ?? "Quatro Life";
    var contactPhone = Configuration["Contact:Phone"] ?? "+90 252 000 00 00";
    var whatsAppRaw = (Configuration["Contact:WhatsApp"] ?? "+90 555 000 00 00").Replace(" ", string.Empty).Replace("+", string.Empty);
    var whatsAppLink = $"https://wa.me/{whatsAppRaw}";
    var contactEmail = Configuration["Contact:Email"] ?? "hello@quatrolife.com";
    var contactAddress = Configuration["Contact:Address"] ?? "Gümbet, Bodrum, Muğla";

    var jsonLd = JsonSerializer.Serialize(new Dictionary<string, object?>
    {
        ["@context"] = "https://schema.org",
        ["@type"] = "Hotel",
        ["name"] = siteName,
        ["telephone"] = contactPhone,
        ["email"] = contactEmail,
        ["image"] = pageContext?.Seo.OpenGraphImageUrl,
        ["url"] = pageContext?.Seo.CanonicalUrl,
        ["address"] = new Dictionary<string, object?>
        {
            ["@type"] = "PostalAddress",
            ["addressLocality"] = "Gümbet",
            ["addressRegion"] = "Muğla",
            ["addressCountry"] = "TR",
            ["streetAddress"] = contactAddress
        }
    });
}
<!DOCTYPE html>
<html lang="@((pageContext?.Culture ?? "tr"))">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <partial name="_SeoPartial" model="pageContext?.Seo" />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@500;600;700&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.4/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body>
    <a class="skip-link" href="#main-content">@Localizer["Accessibility.SkipToContent"]</a>

    @if (pageContext?.ShowSeasonBanner == true)
    {
        <div class="season-banner text-center py-2" role="status">@pageContext.SeasonMessage</div>
    }

    @if (pageContext is not null)
    {
        <partial name="_Header" model="pageContext" />
    }

    <main id="main-content" tabindex="-1" class="main-content">
        @RenderBody()
    </main>

    @if (pageContext is not null)
    {
        <partial name="_Footer" model="pageContext" />
    }

    @if (pageContext is not null)
    {
        <nav class="mobile-booking-bar" aria-label="@Localizer["Accessibility.StickyBooking"]">
            <a class="mobile-booking-action mobile-booking-call" href="tel:@contactPhone">@Localizer["Common.Call"]</a>
            <a class="mobile-booking-action mobile-booking-wa" href="@whatsAppLink" target="_blank" rel="noopener noreferrer">@Localizer["Common.WhatsApp"]</a>
            <a class="mobile-booking-action mobile-booking-cta" href="@pageContext.BookingUrl" target="@(pageContext.IsBookingExternal ? "_blank" : null)" rel="@(pageContext.IsBookingExternal ? "noopener noreferrer nofollow" : null)">@Localizer["Common.BookNow"]</a>
        </nav>
    }

    <partial name="_CookieConsent" />

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.4/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script type="application/ld+json">@Html.Raw(jsonLd)</script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
